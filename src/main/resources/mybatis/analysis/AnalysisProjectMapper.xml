<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.monetware.mapper.analysis.AnalysisProjectMapper">
  <resultMap id="BaseResultMap" type="com.monetware.model.analysis.AnalysisProject">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="describle" jdbcType="VARCHAR" property="describle" />
    <result column="textlibrary_id" jdbcType="BIGINT" property="textlibraryId" />
    <result column="create_user" jdbcType="INTEGER" property="createUser" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="segment_status" jdbcType="INTEGER" property="segmentStatus" />
    <result column="cluste_fields" jdbcType="VARCHAR" property="clusteFields" />
    <result column="cluste_algorithm" jdbcType="INTEGER" property="clusteAlgorithm" />
    <result column="cluste_count" jdbcType="INTEGER" property="clusteCount" />
    <result column="cluste_status" jdbcType="INTEGER" property="clusteStatus" />
    <result column="cluste_start_time" jdbcType="TIMESTAMP" property="clusteStartTime" />
    <result column="cluste_end_time" jdbcType="TIMESTAMP" property="clusteEndTime" />
    <result column="classify_status" jdbcType="INTEGER" property="classifyStatus" />
    <result column="classify_fields" jdbcType="VARCHAR" property="classifyFields" />
    <result column="classify_start_time" jdbcType="TIMESTAMP" property="classifyStartTime" />
    <result column="classify_end_time" jdbcType="TIMESTAMP" property="classifyEndTime" />
    <result column="sentime_status" jdbcType="INTEGER" property="sentimeStatus" />
    <result column="sentime_fields" jdbcType="VARCHAR" property="sentimeFields" />
    <result column="sentime_start_time" jdbcType="TIMESTAMP" property="sentimeStartTime" />
    <result column="sentime_end_time" jdbcType="TIMESTAMP" property="sentimeEndTime" />
    
    <result column="segment_type" jdbcType="VARCHAR" property="segmentType" />
    <result column="segment_column" jdbcType="VARCHAR" property="segmentColumn" />
  </resultMap>
  <resultMap extends="BaseResultMap" id="ResultMapWithBLOBs" type="com.monetware.model.analysis.AnalysisProject">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="classify_categories" jdbcType="LONGVARCHAR" property="classifyCategories" />
    <result column="classify_model" jdbcType="LONGVARCHAR" property="classifyModel" />
    <result column="sentime_words" jdbcType="LONGVARCHAR" property="sentimeWords" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, name, describle, textlibrary_id, create_user, create_time, segment_status, cluste_fields, 
    cluste_algorithm, cluste_count, cluste_status, cluste_start_time, cluste_end_time, 
    classify_status, classify_fields, classify_start_time, classify_end_time, sentime_status, sentime_fields  ,sentime_start_time ,sentime_end_time,  
    segment_type, segment_column
  </sql>
  <sql id="Blob_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    classify_categories, classify_model , sentime_words
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="ResultMapWithBLOBs">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from analysis_project
    where id = #{id,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from analysis_project
    where id = #{id,jdbcType=BIGINT}
  </delete>
  
  <insert id="insertSelective" parameterType="com.monetware.model.analysis.AnalysisProject">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into analysis_project
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="name != null">
        name,
      </if>
      <if test="describle != null">
        describle,
      </if>
      <if test="textlibraryId != null">
        textlibrary_id,
      </if>
      <if test="createUser != null">
        create_user,
      </if>
      <if test="createTime != null">
        create_time,
      </if>
      <if test="segmentStatus != null">
        segment_status,
      </if>
      <if test="clusteFields != null">
        cluste_fields,
      </if>
      <if test="clusteAlgorithm != null">
        cluste_algorithm,
      </if>
      <if test="clusteCount != null">
        cluste_count,
      </if>
      <if test="clusteStatus != null">
        cluste_status,
      </if>
      <if test="clusteStartTime != null">
        cluste_start_time,
      </if>
      <if test="clusteEndTime != null">
        cluste_end_time,
      </if>
      <if test="classifyStatus != null">
        classify_status,
      </if>
      <if test="classifyFields != null">
        classify_fields,
      </if>
      <if test="classifyStartTime != null">
        classify_start_time,
      </if>
      <if test="classifyEndTime != null">
        classify_end_time,
      </if>
      <if test="sentimeStatus != null">
        sentime_status,
      </if>
      <if test="sentimeFields != null">
        sentime_fields,
      </if>
      <if test="sentimeWords != null">
        sentime_words,
      </if>
      <if test="sentimeStartTime != null">
        sentime_start_time,
      </if>
      <if test="sentimeEndTime != null">
        sentime_end_time,
      </if>
      
      
      <if test="segmentType != null">
        segment_type,
      </if>
      <if test="segmentColumn != null">
        segment_column,
      </if>
      <if test="classifyCategories != null">
        classify_categories,
      </if>
      <if test="classifyModel != null">
        classify_model,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=BIGINT},
      </if>
      <if test="name != null">
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="describle != null">
        #{describle,jdbcType=VARCHAR},
      </if>
      <if test="textlibraryId != null">
        #{textlibraryId,jdbcType=BIGINT},
      </if>
      <if test="createUser != null">
        #{createUser,jdbcType=INTEGER},
      </if>
      <if test="createTime != null">
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="segmentStatus != null">
        #{segmentStatus,jdbcType=INTEGER},
      </if>
      <if test="clusteFields != null">
        #{clusteFields,jdbcType=VARCHAR},
      </if>
      <if test="clusteAlgorithm != null">
        #{clusteAlgorithm,jdbcType=INTEGER},
      </if>
      <if test="clusteCount != null">
        #{clusteCount,jdbcType=INTEGER},
      </if>
      <if test="clusteStatus != null">
        #{clusteStatus,jdbcType=INTEGER},
      </if>
      <if test="clusteStartTime != null">
        #{clusteStartTime,jdbcType=TIMESTAMP},
      </if>
      <if test="clusteEndTime != null">
        #{clusteEndTime,jdbcType=TIMESTAMP},
      </if>
      <if test="classifyStatus != null">
        #{classifyStatus,jdbcType=INTEGER},
      </if>
      <if test="classifyFields != null">
        #{classifyFields,jdbcType=VARCHAR},
      </if>
      <if test="classifyStartTime != null">
        #{classifyStartTime,jdbcType=TIMESTAMP},
      </if>
      <if test="classifyEndTime != null">
        #{classifyEndTime,jdbcType=TIMESTAMP},
      </if>
      <if test="sentimeStatus != null">
        #{sentimeStatus,jdbcType=INTEGER},
      </if>
      <if test="sentimeFields != null">
        #{sentimeFields,jdbcType=VARCHAR},
      </if>
      <if test="sentimeWords != null">
        #{sentimeWords,jdbcType=LONGVARCHAR},
      </if>
      <if test="sentimeStartTime != null">
        #{sentimeStartTime,jdbcType=TIMESTAMP},
      </if>
      <if test="sentimeEndTime != null">
        #{sentimeEndTime,jdbcType=TIMESTAMP},
      </if>
      <if test="segmentType != null">
        #{segmentType,jdbcType=VARCHAR},
      </if>
      <if test="segmentColumn != null">
        #{segmentColumn,jdbcType=VARCHAR},
      </if>
      <if test="classifyCategories != null">
        #{classifyCategories,jdbcType=LONGVARCHAR},
      </if>
      <if test="classifyModel != null">
        #{classifyModel,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.monetware.model.analysis.AnalysisProject">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update analysis_project
    <set>
      <if test="name != null">
        name = #{name,jdbcType=VARCHAR},
      </if>
      <if test="describle != null">
        describle = #{describle,jdbcType=VARCHAR},
      </if>
      <if test="textlibraryId != null">
        textlibrary_id = #{textlibraryId,jdbcType=BIGINT},
      </if>
      <if test="createUser != null">
        create_user = #{createUser,jdbcType=INTEGER},
      </if>
      <if test="createTime != null">
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="segmentStatus != null">
        segment_status = #{segmentStatus,jdbcType=INTEGER},
      </if>
      <if test="clusteFields != null">
        cluste_fields = #{clusteFields,jdbcType=VARCHAR},
      </if>
      <if test="clusteAlgorithm != null">
        cluste_algorithm = #{clusteAlgorithm,jdbcType=INTEGER},
      </if>
      <if test="clusteCount != null">
        cluste_count = #{clusteCount,jdbcType=INTEGER},
      </if>
      <if test="clusteStatus != null">
        cluste_status = #{clusteStatus,jdbcType=INTEGER},
      </if>
      <if test="clusteStartTime != null">
        cluste_start_time = #{clusteStartTime,jdbcType=TIMESTAMP},
      </if>
      <if test="clusteEndTime != null">
        cluste_end_time = #{clusteEndTime,jdbcType=TIMESTAMP},
      </if>
      <if test="classifyStatus != null">
        classify_status = #{classifyStatus,jdbcType=INTEGER},
      </if>
      <if test="classifyFields != null">
        classify_fields = #{classifyFields,jdbcType=VARCHAR},
      </if>
      <if test="classifyStartTime != null">
        classify_start_time = #{classifyStartTime,jdbcType=TIMESTAMP},
      </if>
      <if test="classifyEndTime != null">
        classify_end_time = #{classifyEndTime,jdbcType=TIMESTAMP},
      </if>
      <if test="sentimeStatus != null">
        sentime_status = #{sentimeStatus,jdbcType=INTEGER},
      </if>
      <if test="sentimeFields != null">
        sentime_fields = #{sentimeFields,jdbcType=VARCHAR},
      </if>
      <if test="sentimeWords != null">
        sentime_words =  #{sentimeWords,jdbcType=LONGVARCHAR},
      </if>
      
      
      <if test="sentimeStartTime != null">
        sentime_start_time = #{sentimeStartTime,jdbcType=TIMESTAMP},
      </if>
      
      <if test="sentimeEndTime != null">
        sentime_end_time = #{sentimeEndTime,jdbcType=TIMESTAMP},
      </if>
      
      
      
      <if test="segmentType != null">
        segment_type = #{segmentType,jdbcType=VARCHAR},
      </if>
      <if test="segmentColumn != null">
        segment_column = #{segmentColumn,jdbcType=VARCHAR},
      </if>
      <if test="classifyCategories != null">
        classify_categories = #{classifyCategories,jdbcType=LONGVARCHAR},
      </if>
      <if test="classifyModel != null">
        classify_model = #{classifyModel,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
  
  
  
  

  
  
  <select id="getUserAnalysisProjects" parameterType="java.util.Map" resultMap="ResultMapWithBLOBs">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from analysis_project
    where `create_user` = #{userId}
    <if test="name != null">
      and
      `name` like "%"#{name}"%"
    </if>

    ORDER BY create_time desc
	   	 limit  ${pageStart},${pageSize};
  </select>




  <select id="getMonthProjectNo"  resultType="java.lang.Long" parameterType="java.util.Map">
    select
    count(id)
    from
    `analysis_project`
    where
    `create_user` = #{userId}

    and
    `create_time` >= #{firstDay}
    <if test="name != null">
      and
      `name` like "%"#{name}"%"
    </if>

  </select>



  <select id="getUserAnalysisProjectsNo" parameterType="java.lang.Integer" resultType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    count(id)
    from analysis_project
    where create_user = #{userId}

  </select>
  

  
  
</mapper>